{% extends 'base.html.twig' %}

{% block title %}Liste des contrats | Alice CRM{% endblock %}

{% block body %}


<div class="example-wrapper">
    
    <div class="d-flex align-items-center justify-content-between mb-5">
        <h1>Liste des contrats</h1>
        <img src="{{ asset('assets/img/VectorBack.png') }}" class="goBack" id="goBackBtn" alt="Retour" onclick="window.history.back();"></img>
    </div>

        {% if contracts is not empty %}
        
        <div class="table-responsive">

            <table class="table">

                <thead>
                    <tr>
                        <th scope="col">Nom</th>
                        <th scope="col">Client</th>
                        <th scope="col">Date contrat</th>
                        <th scope="col">Site Web</th>
                        <th scope="col" class="d-none d-lg-block">Commentaires</th>
                    </tr>
                </thead>
            
            {% for contract in contracts %}

                <tbody>
                    <tr>
                        <td><a href=" {{ path('app_contract_show', { 'id': contract.id}) }} ">{{ contract.name|upper }}</a></td>
                        <td><a href=" {{ path('app_customer', { 'id': contract.customer.id, 'slug': contract.customer.slug}) }} ">{{ contract.customer.name }}</a></td>
                        <td>{{ contract.date|date("d/m/Y") }}</td>
                        <td><a href="{{ contract.websiteLink }}" target="_blank">{{ contract.websiteLink }}</a></td>
                        <td class="d-none d-lg-block">{{ contract.openArea }}</td>
                        
                    </tr>
                </tbody>

            {% endfor %} 

            </table>
        {% else %}
            <h4 class="mb-5">Aucun Contrat</h4>
            <div class="d-flex flex-column flex-md-row col-12 justify-content-around">
                <div class="card col-md-5 bgg-alice-light m-2">
                    <div class="d-flex flex-column align-items-center card-body justify-content-between">
                        <h6 class="card-title mb-2">Souhaitez-vous ajouter un contrat à un utilisateur existant ?</h6>
                        <a href="{{ path('app_users_list') }}" class="btn btn-alice"> Liste des Utilisateurs</a>
                    </div>
                </div>
                <div class="card col-md-5 bgg-alice-light m-2">
                    <div class="d-flex flex-column align-items-center card-body justify-content-between">
                        <h6 class="card-title mb-2">Ou souhaitez-vous créer un contrat pour un nouvel utilisateur ?</h6>
                        <a href=" {{ path('app_user_add') }} " class="btn btn-alice">Nouvel Utilisateur</a>
                    </div>
                </div>
            </div>
        {% endif %}
    </div>

{% endblock %}
